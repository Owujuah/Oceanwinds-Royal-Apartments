<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewsHub - All Articles</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <link rel="shortcut icon" href="images/WhatsApp Image 2025-10-21 at 13.37.33.jpeg" type="image/x-icon">

    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900|Rubik:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">

    <link rel="stylesheet" href="fonts/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <!-- Theme Style -->
    <link rel="stylesheet" href="css/style.css">
    <style>
       :root {
            --primary-color: #1a73e8;
            --secondary-color: #34a853;
            --accent-color: #ea4335;
            --dark-color: #202124;
            --light-color: #f8f9fa;
            --gray-color: #5f6368;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .search-bar {
            max-width: 600px;
            margin: 0 auto;
            display: none;
        }

        

        /* News Section */
        .section-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .section-title h2 {
            font-size: 1.8rem;
            color: var(--dark-color);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .news-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .news-card:hover {
            transform: translateY(-5px);
        }

        .news-image {
            height: 300px;
            width: 100%;
            /* object-fit: contain; */
        }

        .news-content {
            padding: 20px;
        }

        .news-category {
            display: inline-block;
            background: var(--secondary-color);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .news-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .news-excerpt {
            color: var(--gray-color);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            color: var(--gray-color);
            font-size: 0.85rem;
        }

        .news-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        /* Featured Article */
        

      

        /* Responsive Design */
        

        @media (min-width:800px){
            header {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                z-index: 5;
            }

            header .navbar-brand {
                text-transform: uppercase;
                letter-spacing: .2em;
                font-weight: 400;
                color: #fff !important;
            }

            header .navbar {
                padding-top: 0;
                padding-bottom: 0;
                background: rgba(0, 0, 0, 0.4)  !important;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header role="banner">
     
        <nav class="navbar navbar-expand-md navbar-dark bg-light">
          <div class="container">
            <a class="navbar-brand" href="index.html">Oceanwinds Royal<sup>Apartments</sup></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample05" aria-controls="navbarsExample05" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
  
            <div class="collapse navbar-collapse navbar-light" id="navbarsExample05">
              <ul class="navbar-nav ml-auto pl-lg-5 pl-0">
                <li class="nav-item">
                  <a class="nav-link active" href="index.html">Home</a>
                </li>
               <li class="nav-item">
                  <a class="nav-link" href="blog.html">Blog</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="rooms.html">Apartments</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="contact.php">Contact</a>
                </li>
  
                 <li class="nav-item cta">
                  <a class="nav-link" href="rooms.html"><span>Book Now</span></a>
                </li>
              </ul>
              
            </div>
          </div>
        </nav>
    </header>
      <!-- END header -->
<br>
<br>

    <!-- Hero Section -->
    <section class="hero" style="margin-top: 20px;">
        <div class="container" style="color: white;">
            <!-- <h2 style="color: white;">Stay Informed with the Latest News</h2>
            <p>Get breaking news, in-depth analysis, and exclusive stories from around the world.</p> -->
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search for articles...">
                <button id="searchBtn"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Featured Article -->
        <section id="featuredContainer">
            <!-- <div class="loading">Loading featured article...</div> -->
        </section>

        <!-- News Categories -->
         <br>
        <div class="section-title">
            <h2>Latest News</h2>
            <!-- <div class="auth-buttons">
                <a href="create-article.html" class="btn btn-secondary">Create Article</a>
            </div> -->
        </div>

        <!-- News Grid -->
        <div class="news-grid" id="newsContainer">
            <div class="loading">Loading articles...</div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
          <div class="row mb-5">
            <div class="col-md-4">
              <h3>Phone Support</h3>
              <p class="lead"><a href="tel://">07068506527</a></p>
            </div>
            <div class="col-md-4">
              <h3>Connect With Us</h3>
              <p>
                <a href="https://www.facebook.com/profile.php?id=61576018552292" class="pl-0 p-3"><span class="fa fa-facebook"></span></a>
                <!--<a href="#" class="p-3"><span class="fa fa-twitter"></span></a>-->
                <a href="https://www.instagram.com/ocean.winds_apartments?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" class="p-3"><span class="fa fa-instagram"></span></a>
                <!--<a href="#" class="p-3"><span class="fa fa-vimeo"></span></a>
                <a href="#" class="p-3"><span class="fa fa-youtube-play"></span></a>-->
              </p>
            </div>
            <div class="col-md-4">
              <h3>Connect With Us</h3>
              <p>oceanwindstfze@gmail.com</p>
              <address>Block 1 plot 6 by Mma Giwa Rd, Federal Housing Estate, Beside Bakor Medical Clinic, Calabar.</address>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-md-7 text-center">
              &copy;
              Copyright <script>document.write(new Date().getFullYear());</script> by <a href="#" target="_blank">Oceanwindsroyalapartments</a>
            </div>
          </div>
        </div>
      </footer>
      <!-- END footer -->

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCGW_T8O3bOhCFgabacKwfXPHDQHjPOwwE",
            authDomain: "oceanwindsroyalapartment.firebaseapp.com",
            projectId: "oceanwindsroyalapartment",
            storageBucket: "oceanwindsroyalapartment.firebasestorage.app",
            messagingSenderId: "402432791417",
            appId: "1:402432791417:web:14dcaa0251e07525a455a8",
            measurementId: "G-FLVGYSB847"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // DOM Elements
        const newsContainer = document.getElementById('newsContainer');
        // const featuredContainer = document.getElementById('featuredContainer');
        const categories = document.querySelectorAll('.category');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const navLinks = document.querySelectorAll('nav a');

        // Load news articles from Firebase
        function loadNews(category = 'all', searchQuery = '') {
            let query = db.collection('articles').orderBy('createdAt', 'desc');
            
            // Apply category filter if specified
            if (category && category !== 'all') {
                query = query.where('category', '==', category);
            }
            
            query.get().then((querySnapshot) => {
                const articles = [];
                querySnapshot.forEach((doc) => {
                    const article = doc.data();
                    article.id = doc.id;
                    
                    // Apply search filter if specified
                    if (!searchQuery || 
                        article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                        article.content.toLowerCase().includes(searchQuery.toLowerCase())) {
                        articles.push(article);
                    }
                });
                
                displayNews(articles);
            }).catch((error) => {
                console.error("Error loading articles: ", error);
                newsContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <h3>Error loading articles</h3>
                        <p>Please check your connection and try again</p>
                    </div>
                `;
            });
        }

         // Display news articles in the grid
         function displayNews(articles) {
            // Clear existing content
            newsContainer.innerHTML = '';
            
            if (articles.length === 0) {
                newsContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <h3>No articles found</h3>
                        <a href="create-article.html" class="btn btn-primary" style="margin-top: 15px;">Create First Article</a>
                    </div>
                `;
                featuredContainer.innerHTML = '';
                return;
            }
            
            // Display all articles
            articles.forEach(article => {
                const articleElement = document.createElement('div');
                articleElement.className = 'news-card';
                articleElement.innerHTML = `
                    <img src="${article.imageUrl}" alt="${article.title}" class="news-image">
                    <div class="news-content">
                        <span class="news-category">${article.category}</span>
                        <h3 style="text-transform:capitalize" class="news-title">${article.title}</h3>
                        <p class="news-excerpt">${article.content.substring(0, 100)}...</p>
                        <div class="news-meta">
                            <span style="text-transform:capitalize"><i class="far fa-user"></i> ${article.authorName}</span>
                            <span> ${formatDate(article.createdAt)}</span>
                        </div>
                    </div>
                `;
                
                // Add click event to open article detail
                articleElement.addEventListener('click', () => {
                    openArticleDetail(article.id);
                });
                
                newsContainer.appendChild(articleElement);
            });
        }

        // Function to open article in detail view
        function openArticleDetail(articleId) {
            // Store the article ID in sessionStorage and open new page
            sessionStorage.setItem('currentArticleId', articleId);
            window.open('article-detail.html', '_self');
        }

        // Display featured article
        function displayFeaturedArticle(article) {
            if (!article) return;
            
            featuredContainer.innerHTML = `
                <section class="featured-article">
                    <img src="${article.imageUrl}" alt="${article.title}" class="featured-image">
                    <div class="featured-content">
                        <span class="featured-category">${article.category}</span>
                        <h2 class="featured-title">${article.title}</h2>
                        <p class="featured-excerpt">${article.content.substring(0, 200)}...</p>
                        <div class="news-meta">
                            <span><i class="far fa-user"></i> ${article.authorName}</span>
                            <span> ${formatDate(article.createdAt)}</span>
                        </div>
                    </div>
                </section>
            `;
        }

        // Format Firestore timestamp to readable date
        function formatDate(timestamp) {
            if (!timestamp) return 'Recently';
            
            const date = timestamp.toDate();
            
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
                            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            const month = monthNames[date.getMonth()];
            const day = String(date.getDate()).padStart(2, '');
            const year = date.getFullYear();
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            
            return `${day+'rd'}-${month}-${year} ${hours}:${minutes}`;
        }

        // Category filtering
        categories.forEach(category => {
            category.addEventListener('click', () => {
                categories.forEach(c => c.classList.remove('active'));
                category.classList.add('active');
                const selectedCategory = category.getAttribute('data-category');
                loadNews(selectedCategory);
            });
        });

        // Navigation category filtering
        navLinks.forEach(link => {
            if (link.getAttribute('data-category')) {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const category = link.getAttribute('data-category');
                    
                    // Update active states
                    navLinks.forEach(navLink => navLink.classList.remove('active'));
                    link.classList.add('active');
                    
                    categories.forEach(c => {
                        c.classList.remove('active');
                        if (c.getAttribute('data-category') === category) {
                            c.classList.add('active');
                        }
                    });
                    
                    loadNews(category);
                });
            }
        });

        // Search functionality
        searchBtn.addEventListener('click', () => {
            const searchQuery = searchInput.value.trim();
            const activeCategory = document.querySelector('.category.active').getAttribute('data-category');
            loadNews(activeCategory, searchQuery);
        });

        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const searchQuery = searchInput.value.trim();
                const activeCategory = document.querySelector('.category.active').getAttribute('data-category');
                loadNews(activeCategory, searchQuery);
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadNews();
            
            // Set up real-time listener for new articles
            db.collection('articles')
                .orderBy('createdAt', 'desc')
                .onSnapshot((querySnapshot) => {
                    const activeCategory = document.querySelector('.category.active').getAttribute('data-category');
                    const searchQuery = searchInput.value.trim();
                    loadNews(activeCategory, searchQuery);
                });
        });
    </script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/jquery-migrate-3.0.0.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>

    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/magnific-popup-options.js"></script>

    <script src="js/main.js"></script>
</body>
</html>